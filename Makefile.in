export CC=gcc
export CFLAGS=-std=c99 -pthread -O2 -fstrict-aliasing -fomit-frame-pointer -D_FILE_OFFSET_BITS=64 -D_BSD_SOURCE -pedantic -Werror -Wstrict-aliasing -Wchar-subscripts -Wimplicit -Wsequence-point -Wcast-align -Wstrict-prototypes -Wno-unused-result
export LDFLAGS=-pthread

all: findex ffind

findex:
	$(MAKE) -C src $@

ffind:
	$(MAKE) -C src $@

check: clean
	$(MAKE) -C test check

clean:
	$(MAKE) -C src $@
	$(MAKE) -C test $@

mrproper: clean
	rm -f Makefile

install: all
	cp src/findex @{PREFIX}bin/
	cp src/ffind @{PREFIX}bin/

uninstall:
	rm -f @{PREFIX}bin/findex
	rm -f @{PREFIX}bin/ffind
